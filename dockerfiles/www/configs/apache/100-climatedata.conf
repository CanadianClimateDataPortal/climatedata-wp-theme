# Non-HTTPS configuration for the main website.
#
# For security, this configuration will force HTTPS (redirect to HTTPS) unless the `APP_NO_HTTPS` environment variable
# is explicitly set to "true".

<VirtualHost *:80>
	ServerAdmin webmaster@localhost
	DocumentRoot /var/www/html

	CustomLog ${APACHE_LOG_DIR}/access.log combined
	
	# Force HTTPS unless `APP_NO_HTTPS` is "true"
	<If "env('APP_NO_HTTPS') != 'true'">
        RewriteEngine On
        RewriteCond %{HTTPS} off
        RewriteRule (.*) https://%{HTTP_HOST}%{REQUEST_URI}
    </If>
	
	<Directory "/var/www/html">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory>

</VirtualHost>
